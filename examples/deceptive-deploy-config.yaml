# Deceptive Deploy Configuration Example
#
# This configuration enables production-like mock APIs that look identical to
# production endpoints. Perfect for front-end demos, PoCs, and investor prototypes.

# HTTP server configuration
http:
  port: 3000
  host: "0.0.0.0"
  openapi_spec: "./api-spec.yaml"  # Required for deployment
  cors_enabled: true
  request_timeout_secs: 30

# Deceptive deploy configuration
deceptive_deploy:
  # Enable deceptive deploy mode
  enabled: true

  # Production-like CORS configuration
  cors:
    # Allow all origins (use specific origins in production)
    allowed_origins:
      - "*"
    # Allowed HTTP methods
    allowed_methods:
      - "GET"
      - "POST"
      - "PUT"
      - "DELETE"
      - "PATCH"
      - "OPTIONS"
    # Allow all headers (use specific headers in production)
    allowed_headers:
      - "*"
    # Allow credentials (cookies, authorization headers)
    allow_credentials: true

  # Production-like rate limiting
  rate_limit:
    # Requests per minute allowed
    requests_per_minute: 1000
    # Burst capacity (maximum requests in a short burst)
    burst: 2000
    # Enable per-IP rate limiting
    per_ip: true

  # Production-like headers to add to all responses
  # Supports template expansion: {{uuid}}, {{now}}, {{timestamp}}
  headers:
    # API version header
    X-API-Version: "1.0"
    # Request ID header (generates unique UUID per request)
    X-Request-ID: "{{uuid}}"
    # Server identification
    X-Powered-By: "MockForge"
    # Custom headers
    X-Environment: "production"
    X-Deployment-Date: "{{now}}"

  # OAuth configuration for production-like auth flows (optional)
  # oauth:
  #   client_id: "your-client-id"
  #   client_secret: "your-client-secret"
  #   introspection_url: "https://auth.example.com/introspect"
  #   auth_url: "https://auth.example.com/authorize"
  #   token_url: "https://auth.example.com/token"

  # Custom domain for deployment (optional)
  # custom_domain: "api.example.com"

  # Auto-start tunnel when deploying
  auto_tunnel: true

# Admin UI configuration (optional)
admin:
  enabled: true
  port: 9080
  host: "127.0.0.1"

# Logging configuration
logging:
  level: "info"
  json_format: false

<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Plugin System - MockForge Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="A comprehensive mocking framework for APIs, gRPC, and WebSockets">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">MockForge Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/SaaSy-Solutions/mockforge" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/SaaSy-Solutions/mockforge/edit/main/src/user-guide/plugins.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="plugin-system"><a class="header" href="#plugin-system">Plugin System</a></h1>
<p>MockForge features a powerful WebAssembly-based plugin system that allows you to extend functionality without modifying the core framework. Plugins run in a secure sandbox with resource limits and provide capabilities for custom response generation, authentication, data sources, and template extensions.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The plugin system enables:</p>
<ul>
<li><strong>Custom Response Generators</strong>: Create specialized mock data and responses</li>
<li><strong>Authentication Providers</strong>: Implement JWT, OAuth2, and custom authentication schemes</li>
<li><strong>Data Source Connectors</strong>: Connect to CSV files, databases, and external APIs</li>
<li><strong>Template Extensions</strong>: Add custom template functions and filters</li>
<li><strong>Protocol Handlers</strong>: Extend support for custom protocols and formats</li>
</ul>
<h2 id="plugin-architecture"><a class="header" href="#plugin-architecture">Plugin Architecture</a></h2>
<h3 id="webassembly-runtime"><a class="header" href="#webassembly-runtime">WebAssembly Runtime</a></h3>
<p>Plugins are compiled to WebAssembly (WASM) and run in an isolated runtime environment:</p>
<ul>
<li><strong>Security Sandbox</strong>: Isolated execution prevents plugins from accessing unauthorized resources</li>
<li><strong>Resource Limits</strong>: CPU, memory, and execution time constraints</li>
<li><strong>Capability System</strong>: Fine-grained permissions control what plugins can access</li>
<li><strong>Cross-platform</strong>: WASM plugins work on any platform MockForge supports</li>
</ul>
<h3 id="plugin-types"><a class="header" href="#plugin-types">Plugin Types</a></h3>
<p>MockForge supports several plugin types:</p>
<div class="table-wrapper"><table><thead><tr><th>Type</th><th>Description</th><th>Interface</th></tr></thead><tbody>
<tr><td><code>response</code></td><td>Generate custom response data</td><td><code>ResponseGenerator</code></td></tr>
<tr><td><code>auth</code></td><td>Handle authentication and authorization</td><td><code>AuthProvider</code></td></tr>
<tr><td><code>datasource</code></td><td>Connect to external data sources</td><td><code>DataSourceConnector</code></td></tr>
<tr><td><code>template</code></td><td>Add custom template functions</td><td><code>TemplateExtension</code></td></tr>
<tr><td><code>protocol</code></td><td>Support custom protocols</td><td><code>ProtocolHandler</code></td></tr>
</tbody></table>
</div>
<h2 id="installing-plugins"><a class="header" href="#installing-plugins">Installing Plugins</a></h2>
<h3 id="from-plugin-registry"><a class="header" href="#from-plugin-registry">From Plugin Registry</a></h3>
<pre><code class="language-bash"># Install plugin from registry
mockforge plugin install auth-jwt

# Install specific version
mockforge plugin install auth-jwt@1.2.0

# List available plugins
mockforge plugin search
</code></pre>
<h3 id="from-local-file"><a class="header" href="#from-local-file">From Local File</a></h3>
<pre><code class="language-bash"># Install from local WASM file
mockforge plugin install ./my-plugin.wasm

# Install with manifest
mockforge plugin install ./my-plugin/ --manifest plugin.yaml
</code></pre>
<h3 id="from-git-repository"><a class="header" href="#from-git-repository">From Git Repository</a></h3>
<pre><code class="language-bash"># Install from Git repository
mockforge plugin install https://github.com/example/mockforge-plugin-custom.git

# Install specific branch/tag
mockforge plugin install https://github.com/example/mockforge-plugin-custom.git#v1.0.0
</code></pre>
<h2 id="plugin-management"><a class="header" href="#plugin-management">Plugin Management</a></h2>
<h3 id="list-installed-plugins"><a class="header" href="#list-installed-plugins">List Installed Plugins</a></h3>
<pre><code class="language-bash"># List all installed plugins
mockforge plugin list

# Show detailed information
mockforge plugin list --verbose

# Filter by type
mockforge plugin list --type auth
</code></pre>
<h3 id="enabledisable-plugins"><a class="header" href="#enabledisable-plugins">Enable/Disable Plugins</a></h3>
<pre><code class="language-bash"># Enable plugin
mockforge plugin enable auth-jwt

# Disable plugin
mockforge plugin disable auth-jwt

# Enable plugin for specific workspace
mockforge plugin enable auth-jwt --workspace my-workspace
</code></pre>
<h3 id="update-plugins"><a class="header" href="#update-plugins">Update Plugins</a></h3>
<pre><code class="language-bash"># Update specific plugin
mockforge plugin update auth-jwt

# Update all plugins
mockforge plugin update --all

# Check for updates
mockforge plugin outdated
</code></pre>
<h3 id="remove-plugins"><a class="header" href="#remove-plugins">Remove Plugins</a></h3>
<pre><code class="language-bash"># Remove plugin
mockforge plugin remove auth-jwt

# Remove plugin and its data
mockforge plugin remove auth-jwt --purge
</code></pre>
<h2 id="plugin-configuration"><a class="header" href="#plugin-configuration">Plugin Configuration</a></h2>
<h3 id="global-configuration"><a class="header" href="#global-configuration">Global Configuration</a></h3>
<p>Configure plugins in your MockForge configuration file:</p>
<pre><code class="language-yaml">plugins:
  enabled: true
  directory: "~/.mockforge/plugins"
  runtime:
    memory_limit_mb: 64
    cpu_limit_percent: 10
    execution_timeout_ms: 5000
  
  # Plugin-specific configuration
  auth-jwt:
    enabled: true
    config:
      secret_key: "${JWT_SECRET}"
      algorithm: "HS256"
      expiration: 3600
  
  datasource-csv:
    enabled: true
    config:
      base_directory: "./data"
      cache_ttl: 300
</code></pre>
<h3 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h3>
<pre><code class="language-bash"># Plugin system settings
export MOCKFORGE_PLUGINS_ENABLED=true
export MOCKFORGE_PLUGINS_DIRECTORY=~/.mockforge/plugins

# Runtime limits
export MOCKFORGE_PLUGIN_MEMORY_LIMIT=64
export MOCKFORGE_PLUGIN_CPU_LIMIT=10
export MOCKFORGE_PLUGIN_TIMEOUT=5000

# Plugin-specific settings
export JWT_SECRET=your-secret-key
export CSV_DATA_DIR=./test-data
</code></pre>
<h2 id="developing-plugins"><a class="header" href="#developing-plugins">Developing Plugins</a></h2>
<h3 id="plugin-manifest"><a class="header" href="#plugin-manifest">Plugin Manifest</a></h3>
<p>Every plugin requires a <code>plugin.yaml</code> manifest file:</p>
<pre><code class="language-yaml"># plugin.yaml
name: "auth-jwt"
version: "1.0.0"
description: "JWT authentication provider"
author: "Your Name &lt;email@example.com&gt;"
license: "MIT"
repository: "https://github.com/example/mockforge-plugin-auth-jwt"

# Plugin metadata
type: "auth"
category: "authentication"
tags: ["jwt", "auth", "security"]

# Runtime requirements
runtime:
  wasm_version: "0.1"
  memory_limit_mb: 32
  execution_timeout_ms: 1000

# Capabilities required
capabilities:
  - "network.http.client"
  - "storage.key_value"
  - "template.functions"

# Configuration schema
config_schema:
  type: "object"
  properties:
    secret_key:
      type: "string"
      description: "JWT signing secret"
      required: true
    algorithm:
      type: "string"
      enum: ["HS256", "HS384", "HS512", "RS256"]
      default: "HS256"
    expiration:
      type: "integer"
      description: "Token expiration in seconds"
      default: 3600
      minimum: 60

# Export information
exports:
  auth_provider: "JwtAuthProvider"
  template_functions:
    - "jwt_encode"
    - "jwt_decode"
    - "jwt_verify"
</code></pre>
<h3 id="rust-plugin-development"><a class="header" href="#rust-plugin-development">Rust Plugin Development</a></h3>
<p>Create a new Rust project for your plugin:</p>
<pre><code class="language-bash">cargo new --lib mockforge-plugin-custom
cd mockforge-plugin-custom
</code></pre>
<p>Add dependencies to <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[package]
name = "mockforge-plugin-custom"
version = "0.1.0"
edition = "2021"

[lib]
crate-type = ["cdylib"]

[dependencies]
mockforge-plugin-core = "0.1.0"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
wasm-bindgen = "0.2"

[dependencies.web-sys]
version = "0.3"
features = [
  "console",
]
</code></pre>
<p>Implement your plugin in <code>src/lib.rs</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use mockforge_plugin_core::{
    AuthProvider, AuthResult, PluginConfig, PluginError, PluginResult,
    export_auth_provider, export_template_functions
};
use serde::{Deserialize, Serialize};
use wasm_bindgen::prelude::*;

#[derive(Deserialize)]
struct JwtConfig {
    secret_key: String,
    algorithm: String,
    expiration: u64,
}

pub struct JwtAuthProvider {
    config: JwtConfig,
}

impl JwtAuthProvider {
    pub fn new(config: PluginConfig) -&gt; PluginResult&lt;Self&gt; {
        let jwt_config: JwtConfig = serde_json::from_value(config.into())?;
        Ok(Self { config: jwt_config })
    }
}

impl AuthProvider for JwtAuthProvider {
    fn authenticate(&amp;self, token: &amp;str) -&gt; PluginResult&lt;AuthResult&gt; {
        // Implement JWT validation logic
        match self.verify_jwt(token) {
            Ok(claims) =&gt; Ok(AuthResult::success(claims)),
            Err(e) =&gt; Ok(AuthResult::failure(e.to_string())),
        }
    }
    
    fn generate_token(&amp;self, user_id: &amp;str) -&gt; PluginResult&lt;String&gt; {
        // Implement JWT generation logic
        self.create_jwt(user_id)
    }
}

impl JwtAuthProvider {
    fn verify_jwt(&amp;self, token: &amp;str) -&gt; Result&lt;serde_json::Value, PluginError&gt; {
        // JWT verification implementation
        todo!("Implement JWT verification")
    }
    
    fn create_jwt(&amp;self, user_id: &amp;str) -&gt; PluginResult&lt;String&gt; {
        // JWT creation implementation
        todo!("Implement JWT creation")
    }
}

// Template functions
#[wasm_bindgen]
pub fn jwt_encode(payload: &amp;str, secret: &amp;str) -&gt; String {
    // Implement JWT encoding for templates
    todo!("Implement template JWT encoding")
}

#[wasm_bindgen]
pub fn jwt_decode(token: &amp;str) -&gt; String {
    // Implement JWT decoding for templates
    todo!("Implement template JWT decoding")
}

// Export plugin interfaces
export_auth_provider!(JwtAuthProvider);
export_template_functions! {
    "jwt_encode" =&gt; jwt_encode,
    "jwt_decode" =&gt; jwt_decode,
}
<span class="boring">}</span></code></pre></pre>
<h3 id="building-plugins"><a class="header" href="#building-plugins">Building Plugins</a></h3>
<p>Build your plugin to WebAssembly:</p>
<pre><code class="language-bash"># Install wasm-pack if not already installed
cargo install wasm-pack

# Build the plugin
wasm-pack build --target web --out-dir pkg

# The WASM file will be in pkg/mockforge_plugin_custom.wasm
</code></pre>
<h3 id="testing-plugins"><a class="header" href="#testing-plugins">Testing Plugins</a></h3>
<p>MockForge provides a testing framework for plugins:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;
    use mockforge_plugin_core::test_utils::*;

    #[test]
    fn test_jwt_authentication() {
        let config = test_config! {
            "secret_key": "test-secret",
            "algorithm": "HS256",
            "expiration": 3600
        };
        
        let provider = JwtAuthProvider::new(config).unwrap();
        
        // Test valid token
        let token = provider.generate_token("user123").unwrap();
        let result = provider.authenticate(&amp;token).unwrap();
        assert!(result.is_success());
        
        // Test invalid token
        let invalid_result = provider.authenticate("invalid.token.here").unwrap();
        assert!(invalid_result.is_failure());
    }
}
<span class="boring">}</span></code></pre></pre>
<h2 id="plugin-examples"><a class="header" href="#plugin-examples">Plugin Examples</a></h2>
<p>MockForge includes several example plugins to demonstrate different capabilities:</p>
<h3 id="authentication-plugins"><a class="header" href="#authentication-plugins">Authentication Plugins</a></h3>
<h4 id="basic-authentication-auth-basic"><a class="header" href="#basic-authentication-auth-basic">Basic Authentication (<code>auth-basic</code>)</a></h4>
<pre><code class="language-yaml"># examples/plugins/auth-basic/plugin.yaml
name: "auth-basic"
type: "auth"
description: "HTTP Basic Authentication provider"

config_schema:
  type: "object"
  properties:
    users:
      type: "object"
      description: "Username to password mapping"
    realm:
      type: "string"
      default: "MockForge"
</code></pre>
<p>Usage in MockForge configuration:</p>
<pre><code class="language-yaml">plugins:
  auth-basic:
    enabled: true
    config:
      realm: "API Access"
      users:
        admin: "password123"
        user: "userpass"
</code></pre>
<h4 id="jwt-authentication-auth-jwt"><a class="header" href="#jwt-authentication-auth-jwt">JWT Authentication (<code>auth-jwt</code>)</a></h4>
<p>Advanced JWT authentication with support for multiple algorithms:</p>
<pre><code class="language-yaml"># examples/plugins/auth-jwt/plugin.yaml
name: "auth-jwt"
type: "auth"
description: "JWT authentication provider with multiple algorithm support"

capabilities:
  - "storage.key_value"
  - "template.functions"

config_schema:
  type: "object"
  properties:
    secret_key:
      type: "string"
      required: true
    algorithm:
      type: "string"
      enum: ["HS256", "HS384", "HS512", "RS256", "RS384", "RS512"]
      default: "HS256"
    issuer:
      type: "string"
      description: "JWT issuer claim"
    audience:
      type: "string"
      description: "JWT audience claim"
</code></pre>
<h3 id="data-source-plugins"><a class="header" href="#data-source-plugins">Data Source Plugins</a></h3>
<h4 id="csv-data-source-datasource-csv"><a class="header" href="#csv-data-source-datasource-csv">CSV Data Source (<code>datasource-csv</code>)</a></h4>
<p>Connect to CSV files as data sources:</p>
<pre><code class="language-yaml"># examples/plugins/datasource-csv/plugin.yaml
name: "datasource-csv"
type: "datasource"
description: "CSV file data source connector"

config_schema:
  type: "object"
  properties:
    base_directory:
      type: "string"
      description: "Base directory for CSV files"
      required: true
    cache_ttl:
      type: "integer"
      description: "Cache TTL in seconds"
      default: 300
    delimiter:
      type: "string"
      description: "CSV delimiter"
      default: ","
</code></pre>
<p>Usage in templates:</p>
<pre><code class="language-yaml">response:
  status: 200
  body:
    users: "{{datasource.csv('users.csv').random(5)}}"
    products: "{{datasource.csv('products.csv').filter('category', 'electronics')}}"
</code></pre>
<h3 id="template-plugins"><a class="header" href="#template-plugins">Template Plugins</a></h3>
<h4 id="crypto-functions-template-crypto"><a class="header" href="#crypto-functions-template-crypto">Crypto Functions (<code>template-crypto</code>)</a></h4>
<p>Add cryptographic template functions:</p>
<pre><code class="language-yaml"># examples/plugins/template-crypto/plugin.yaml
name: "template-crypto"
type: "template"
description: "Cryptographic template functions"

exports:
  template_functions:
    - "crypto_hash"
    - "crypto_hmac"
    - "crypto_encrypt"
    - "crypto_decrypt"
    - "crypto_random"
</code></pre>
<p>Template usage:</p>
<pre><code class="language-yaml">response:
  body:
    user_id: "{{uuid}}"
    password_hash: "{{crypto_hash(faker.password, 'sha256')}}"
    api_key: "{{crypto_random(32, 'hex')}}"
    signature: "{{crypto_hmac(request.body, env.API_SECRET, 'sha256')}}"
</code></pre>
<h3 id="response-plugins"><a class="header" href="#response-plugins">Response Plugins</a></h3>
<h4 id="graphql-response-generator-response-graphql"><a class="header" href="#graphql-response-generator-response-graphql">GraphQL Response Generator (<code>response-graphql</code>)</a></h4>
<p>Generate GraphQL responses from schema:</p>
<pre><code class="language-yaml"># examples/plugins/response-graphql/plugin.yaml
name: "response-graphql"
type: "response"
description: "GraphQL response generator"

config_schema:
  type: "object"
  properties:
    schema_file:
      type: "string"
      description: "Path to GraphQL schema file"
      required: true
    resolvers:
      type: "object"
      description: "Custom resolver configuration"
</code></pre>
<h2 id="security-considerations"><a class="header" href="#security-considerations">Security Considerations</a></h2>
<h3 id="capability-system"><a class="header" href="#capability-system">Capability System</a></h3>
<p>Plugins must declare required capabilities:</p>
<pre><code class="language-yaml"># plugin.yaml
capabilities:
  - "network.http.client"     # Make HTTP requests
  - "network.http.server"     # Handle HTTP requests
  - "storage.key_value"       # Access key-value storage
  - "storage.file.read"       # Read files
  - "storage.file.write"      # Write files
  - "template.functions"      # Register template functions
  - "crypto.random"           # Access random number generation
  - "crypto.hash"             # Access hashing functions
</code></pre>
<h3 id="resource-limits"><a class="header" href="#resource-limits">Resource Limits</a></h3>
<p>Configure resource limits per plugin:</p>
<pre><code class="language-yaml">plugins:
  my-plugin:
    runtime:
      memory_limit_mb: 64        # Maximum memory usage
      cpu_limit_percent: 5       # Maximum CPU usage
      execution_timeout_ms: 2000 # Maximum execution time
      network_timeout_ms: 1000   # Network request timeout
</code></pre>
<h3 id="sandboxing"><a class="header" href="#sandboxing">Sandboxing</a></h3>
<p>Plugins run in a secure sandbox that:</p>
<ul>
<li>Prevents access to the host file system outside permitted directories</li>
<li>Limits network access to declared endpoints</li>
<li>Restricts system calls and resource usage</li>
<li>Isolates plugin memory from the host process</li>
</ul>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="plugin-development"><a class="header" href="#plugin-development">Plugin Development</a></h3>
<ol>
<li><strong>Keep plugins focused</strong>: Each plugin should have a single, clear purpose</li>
<li><strong>Minimize resource usage</strong>: Use efficient algorithms and limit memory allocation</li>
<li><strong>Handle errors gracefully</strong>: Return meaningful error messages</li>
<li><strong>Document configuration</strong>: Provide clear schema and examples</li>
<li><strong>Test thoroughly</strong>: Include comprehensive tests for all functionality</li>
</ol>
<h3 id="plugin-usage"><a class="header" href="#plugin-usage">Plugin Usage</a></h3>
<ol>
<li><strong>Review plugin capabilities</strong>: Understand what permissions plugins require</li>
<li><strong>Monitor resource usage</strong>: Check plugin performance and resource consumption</li>
<li><strong>Keep plugins updated</strong>: Regularly update to get security fixes and improvements</li>
<li><strong>Use official plugins</strong>: Prefer plugins from trusted sources</li>
<li><strong>Test in development</strong>: Thoroughly test plugins before production use</li>
</ol>
<h3 id="security"><a class="header" href="#security">Security</a></h3>
<ol>
<li><strong>Audit plugin code</strong>: Review plugin source code when possible</li>
<li><strong>Limit capabilities</strong>: Only grant necessary permissions</li>
<li><strong>Monitor logs</strong>: Watch for suspicious plugin behavior</li>
<li><strong>Use resource limits</strong>: Prevent plugins from consuming excessive resources</li>
<li><strong>Isolate environments</strong>: Use separate plugin configurations for development and production</li>
</ol>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="common-issues"><a class="header" href="#common-issues">Common Issues</a></h3>
<h4 id="plugin-wont-load"><a class="header" href="#plugin-wont-load">Plugin Won’t Load</a></h4>
<pre><code class="language-bash"># Check plugin status
mockforge plugin status my-plugin

# Validate plugin manifest
mockforge plugin validate ./my-plugin/plugin.yaml

# Check logs for errors
mockforge logs --filter "plugin"
</code></pre>
<h4 id="runtime-errors"><a class="header" href="#runtime-errors">Runtime Errors</a></h4>
<pre><code class="language-bash"># Enable debug logging
RUST_LOG=mockforge_plugin_loader=debug mockforge serve

# Check resource limits
mockforge plugin stats my-plugin

# Validate configuration
mockforge plugin config validate my-plugin
</code></pre>
<h4 id="performance-issues"><a class="header" href="#performance-issues">Performance Issues</a></h4>
<pre><code class="language-bash"># Monitor plugin performance
mockforge plugin stats --watch

# Check memory usage
mockforge plugin stats --memory

# Profile plugin execution
mockforge plugin profile my-plugin
</code></pre>
<h3 id="debug-mode"><a class="header" href="#debug-mode">Debug Mode</a></h3>
<p>Enable debug mode for plugin development:</p>
<pre><code class="language-yaml">plugins:
  debug_mode: true
  verbose_logging: true
  enable_profiling: true
</code></pre>
<p>This comprehensive plugin system enables powerful extensibility while maintaining security and performance. Plugins can significantly extend MockForge’s capabilities for specialized use cases and integrations.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../user-guide/websocket-mocking/interactive.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../user-guide/security.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../user-guide/websocket-mocking/interactive.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../user-guide/security.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../custom.js"></script>



    </div>
    </body>
</html>

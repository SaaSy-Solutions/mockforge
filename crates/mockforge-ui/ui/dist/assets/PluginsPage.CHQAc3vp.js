import{r as t,j as e}from"./react-vendor.CjFKJWOU.js";import{c as R,au as x,A as _,T as A,a5 as q,B as o,R as L,aF as K,aG as Q,aH as W,aI as O,H as X,J as V,k as C,ai as F,aj as M,aJ as E,aK as Y,m as H,aq as $,ar as z,as as S,at as P,aL as Z,y as ee,aM as se,ax as G,F as ae,aN as I,aO as T,aP as te,l as le,P as ie,G as re,aQ as ne,s as ce,E as de,aR as xe}from"./index.js";import{G as oe}from"./globe.DUkIu56i.js";import{S as he}from"./shield.D3o1gwXi.js";import{T as me}from"./trending-up.DgqH4lqx.js";import{L as U}from"./loader-circle.DayZ6CKk.js";import"./chart-vendor.Bws7AqQX.js";import"./query-vendor.CB8uHlA8.js";import"./ui-vendor.B5WCADYB.js";import"./state-vendor.RQj9JU5O.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],je=R("ellipsis",ue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],ge=R("link",pe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],ve=R("network",Ne);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fe=R("user",ye);function we({filterType:n,filterStatus:d,onSelectPlugin:a}){const[h,f]=t.useState([]),[u,j]=t.useState(!0),[v,p]=t.useState(null),i=t.useCallback(async()=>{try{j(!0);const s=new URLSearchParams;n&&s.append("type",n),d&&s.append("status",d);const c=await(await fetch(`/__mockforge/plugins?${s}`)).json();c.success?f(c.data.plugins):p(c.error)}catch{p("Failed to fetch plugins")}finally{j(!1)}},[n,d]);t.useEffect(()=>{i()},[i]);const y=async s=>{if(confirm(`Are you sure you want to delete plugin "${s}"?`))try{const c=await(await fetch(`/__mockforge/plugins/${s}`,{method:"DELETE"})).json();c.success?i():alert(`Failed to delete plugin: ${c.error}`)}catch{alert("Failed to delete plugin")}},g=async s=>{try{const c=await(await fetch("/__mockforge/plugins/reload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:s})})).json();c.success?i():alert(`Failed to reload plugin: ${c.error}`)}catch{alert("Failed to reload plugin")}},r=(s,m)=>{const c=m?"success":"destructive",k=m?e.jsx(F,{className:"w-3 h-3"}):e.jsx(M,{className:"w-3 h-3"});return e.jsxs(C,{variant:c,className:"flex items-center gap-1",children:[k,s]})},l=s=>s.map(m=>e.jsx(C,{variant:"outline",className:"text-xs",children:m},m));return u?e.jsx(x,{children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})})}):v?e.jsxs(_,{variant:"destructive",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Error loading plugins:"})," ",v]})]}):h.length===0?e.jsx(x,{children:e.jsx("div",{className:"p-6 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(q,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No plugins installed"}),e.jsx("p",{className:"mb-4",children:"Install plugins to extend MockForge functionality"}),e.jsx(o,{variant:"outline",children:"Browse Marketplace"})]})})}):e.jsx(x,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium",children:["Installed Plugins (",h.length,")"]}),e.jsx(o,{variant:"outline",size:"sm",onClick:i,children:e.jsx(L,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Version"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Types"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Author"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-12"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:h.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.description})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-100",children:s.version}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex gap-1 flex-wrap",children:l(s.types)})}),e.jsx("td",{className:"px-6 py-4",children:r(s.status,s.healthy)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-100",children:s.author}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(K,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"sm",children:e.jsx(je,{className:"w-4 h-4"})})}),e.jsxs(W,{align:"end",children:[e.jsxs(O,{onClick:()=>a(s.id),children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(O,{onClick:()=>g(s.id),children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Reload"]}),e.jsxs(O,{onClick:()=>y(s.id),className:"text-red-600",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},s.id))})]})})]})})}function be({pluginId:n,onClose:d}){const[a,h]=t.useState(null),[f,u]=t.useState(!0),[j,v]=t.useState(null),p=t.useCallback(async()=>{try{u(!0);const l=await(await fetch(`/__mockforge/plugins/${n}`)).json();l.success?h(l.data):v(l.error)}catch{v("Failed to fetch plugin details")}finally{u(!1)}},[n]);t.useEffect(()=>{p()},[p]);const i=r=>r?e.jsx(F,{className:"w-5 h-5 text-green-500"}):e.jsx(M,{className:"w-5 h-5 text-red-500"}),y=r=>r.map(l=>e.jsx(C,{variant:"outline",className:"text-xs",children:l},l)),g=r=>new Date(r).toLocaleString();return f?e.jsx(E,{open:!0,onOpenChange:d,children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})})}):j||!a?e.jsx(E,{open:!0,onOpenChange:d,children:e.jsxs("div",{className:"p-6",children:[e.jsxs(_,{variant:"destructive",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Error:"})," ",j||"Plugin not found"]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(o,{onClick:d,children:"Close"})})]})}):e.jsx(E,{open:!0,onOpenChange:d,className:"max-w-4xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i(a.healthy),e.jsx("h2",{className:"text-2xl font-bold",children:a.name})]}),e.jsx(C,{variant:"outline",children:a.version})]}),e.jsx(o,{variant:"ghost",size:"sm",onClick:d,children:e.jsx(Y,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Basic Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ID:"}),e.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:a.id})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Types:"}),e.jsx("div",{className:"flex gap-1",children:y(a.types)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),e.jsx(C,{variant:a.healthy?"success":"destructive",children:a.status})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm",children:a.author})]}),a.homepage&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4 text-gray-600"}),e.jsx("a",{href:a.homepage,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:a.homepage})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-600",children:a.description})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Health Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),e.jsx(C,{variant:a.health.status==="healthy"?"success":"destructive",children:a.health.status})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-gray-600"}),e.jsxs("span",{className:"text-sm",children:["Last checked: ",g(a.health.last_check)]})]}),a.health.message&&e.jsx(_,{variant:a.healthy?"default":"destructive",className:"text-sm",children:a.health.message})]})]})})]}),e.jsxs($,{defaultValue:"capabilities",className:"w-full",children:[e.jsxs(z,{className:"grid w-full grid-cols-3",children:[e.jsx(S,{value:"capabilities",children:"Capabilities"}),e.jsx(S,{value:"resources",children:"Resources"}),e.jsx(S,{value:"actions",children:"Actions"})]}),e.jsx(P,{value:"capabilities",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(x,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("h4",{className:"font-medium",children:"Network Access"})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Outbound HTTP: ",a.capabilities.network.allow_http_outbound?"Allowed":"Blocked"]}),e.jsxs("div",{children:["Allowed Hosts: ",a.capabilities.network.allowed_hosts.join(", ")||"None"]})]})]})}),e.jsx(x,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("h4",{className:"font-medium",children:"File System"})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Read Access: ",a.capabilities.filesystem.allow_read?"Allowed":"Blocked"]}),e.jsxs("div",{children:["Write Access: ",a.capabilities.filesystem.allow_write?"Allowed":"Blocked"]}),e.jsxs("div",{children:["Allowed Paths: ",a.capabilities.filesystem.allowed_paths.join(", ")||"None"]})]})]})})]})}),e.jsx(P,{value:"resources",className:"space-y-4",children:e.jsx(x,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("h4",{className:"font-medium",children:"Resource Limits"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Max Memory"}),e.jsxs("div",{className:"font-medium",children:[(a.capabilities.resources.max_memory_bytes/1024/1024).toFixed(0)," MB"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Max CPU"}),e.jsxs("div",{className:"font-medium",children:[a.capabilities.resources.max_cpu_percent,"%"]})]})]})]})})}),e.jsx(P,{value:"actions",className:"space-y-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(o,{variant:"outline",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Reload Plugin"]}),e.jsx(o,{variant:"outline",children:"Enable/Disable"}),e.jsxs(o,{variant:"destructive",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Uninstall"]})]})})]})]})})}function ke(){const[n,d]=t.useState(null),[a,h]=t.useState(!0),[f,u]=t.useState(null);t.useEffect(()=>{j()},[]);const j=async()=>{try{h(!0);const s=await(await fetch("/__mockforge/plugins/status")).json();s.success?d(s.data):u(s.error)}catch{u("Failed to fetch plugin status")}finally{h(!1)}},v=l=>l?e.jsx(F,{className:"w-4 h-4 text-green-500"}):e.jsx(M,{className:"w-4 h-4 text-red-500"}),p=l=>new Date(l).toLocaleString();if(a)return e.jsx(x,{children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})})});if(f||!n)return e.jsxs(_,{variant:"destructive",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Error loading plugin status:"})," ",f||"Unknown error"]})]});const{stats:i,health:y}=n,g=y.filter(l=>l.healthy).length,r=y.filter(l=>!l.healthy).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(x,{children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Plugins"}),e.jsx("p",{className:"text-2xl font-bold",children:i.total_plugins})]}),e.jsx(ee,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(x,{children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Loaded"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:i.loaded})]}),e.jsx(F,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(x,{children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Failed"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:i.failed})]}),e.jsx(M,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(x,{children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[i.success_rate.toFixed(1),"%"]})]}),e.jsx(me,{className:"w-8 h-8 text-green-500"})]})})})]}),e.jsx(x,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Plugin Loading Success Rate"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Success Rate"}),e.jsxs("span",{children:[i.success_rate.toFixed(1),"%"]})]}),e.jsx(se,{value:i.success_rate,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Loaded: ",i.loaded]}),e.jsxs("span",{children:["Failed: ",i.failed]}),e.jsxs("span",{children:["Skipped: ",i.skipped]})]})]})]})}),e.jsx(x,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Plugin Health Status"}),e.jsx(o,{variant:"outline",size:"sm",onClick:j,children:e.jsx(L,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-green-500"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:g})," healthy"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-red-500"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:r})," unhealthy"]})]})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:y.map(l=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${l.healthy?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[v(l.healthy),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:l.id}),e.jsx("div",{className:"text-sm text-gray-600",children:l.message})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx(H,{className:"w-3 h-3 inline mr-1"}),p(l.last_check)]})]},l.id))}),n.last_updated&&e.jsxs("div",{className:"mt-4 text-xs text-gray-500 text-center",children:["Last updated: ",p(n.last_updated)]})]})})]})}function Se({onClose:n}){const[d,a]=t.useState("file"),[h,f]=t.useState(""),[u,j]=t.useState(""),[v,p]=t.useState(""),[i,y]=t.useState(!1),[g,r]=t.useState(!1),[l,s]=t.useState(null),[m,c]=t.useState(null),k=d==="file"?h:u,D=async()=>{if(!k.trim()){s("Please provide a plugin source");return}try{r(!0),s(null);const w=await(await fetch("/__mockforge/plugins/install",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:k.trim(),id:v.trim()||void 0,force:!1,skip_validation:i})})).json();w.success?(c("Plugin installed successfully!"),setTimeout(()=>{n(),window.location.reload()},2e3)):s(w.error)}catch{s("Failed to install plugin")}finally{r(!1)}},B=async()=>{if(!k.trim()){s("Please provide a plugin source to validate");return}try{r(!0),s(null);const w=await(await fetch("/__mockforge/plugins/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:k.trim(),verbose:!0})})).json();w.success&&w.data.valid?c(`Plugin is valid: ${w.data.name} v${w.data.version}`):s(w.error||"Plugin validation failed")}catch{s("Failed to validate plugin")}finally{r(!1)}};return e.jsx(E,{open:!0,onOpenChange:n,className:"max-w-2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(G,{className:"w-6 h-6 text-blue-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"Install Plugin"})]}),e.jsxs($,{value:d,onValueChange:N=>a(N),children:[e.jsxs(z,{className:"grid w-full grid-cols-2",children:[e.jsxs(S,{value:"file",className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4"}),"Local File"]}),e.jsxs(S,{value:"url",className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"}),"URL"]})]}),e.jsx(P,{value:"file",className:"space-y-4 mt-4",children:e.jsxs("div",{children:[e.jsx(I,{htmlFor:"file-path",children:"Plugin Directory Path"}),e.jsx(T,{id:"file-path",placeholder:"/path/to/plugin-directory",value:h,onChange:N=>f(N.target.value)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Path to a directory containing plugin.yaml and WebAssembly file"})]})}),e.jsx(P,{value:"url",className:"space-y-4 mt-4",children:e.jsxs("div",{children:[e.jsx(I,{htmlFor:"url",children:"Plugin URL"}),e.jsx(T,{id:"url",placeholder:"https://example.com/plugin.zip",value:u,onChange:N=>j(N.target.value)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"URL to a plugin archive (.zip, .tar.gz) or Git repository"})]})})]}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"plugin-id",children:"Plugin ID (Optional)"}),e.jsx(T,{id:"plugin-id",placeholder:"auto-generated",value:v,onChange:N=>p(N.target.value)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to auto-detect from plugin manifest"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"skip-validation",checked:i,onChange:N=>y(N.target.checked),className:"rounded border-gray-300"}),e.jsx(I,{htmlFor:"skip-validation",className:"text-sm",children:"Skip validation (not recommended)"})]})]}),l&&e.jsxs(_,{variant:"destructive",className:"mt-4",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("div",{children:l})]}),m&&e.jsxs(_,{variant:"default",className:"mt-4 border-green-200 bg-green-50",children:[e.jsx(F,{className:"h-4 w-4 text-green-600"}),e.jsx("div",{className:"text-green-800",children:m})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx(o,{variant:"outline",onClick:B,disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4 mr-2 animate-spin"}),"Validating..."]}):"Validate"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{variant:"outline",onClick:n,disabled:g,children:"Cancel"}),e.jsx(o,{onClick:D,disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4 mr-2 animate-spin"}),"Installing..."]}):"Install Plugin"})]})]})]})})}function Ae(){const[n,d]=t.useState("installed"),[a,h]=t.useState(null),[f,u]=t.useState(!1),[j,v]=t.useState(""),[p,i]=t.useState(""),[y,g]=t.useState(""),[r,l]=t.useState(!1),[s,m]=t.useState(null),[c,k]=t.useState(!1),[D,B]=t.useState(0),N=t.useCallback(async()=>{k(!0),m(null);try{const b=await te.reloadAllPlugins();B(J=>J+1),le.info(b.message)}catch(b){m(b instanceof Error?b.message:"Failed to reload plugins")}finally{k(!1)}},[]),w=t.useCallback(()=>{window.open("/plugins/marketplace","_blank")},[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ie,{title:"Plugin Management",subtitle:"Manage authentication, template, response, and datasource plugins",action:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(o,{variant:"outline",onClick:()=>u(!0),className:"flex items-center gap-2",disabled:r,"aria-label":"Install new plugin",children:[e.jsx(re,{className:"w-4 h-4"}),"Install Plugin"]}),e.jsxs(o,{variant:"outline",className:"flex items-center gap-2",onClick:N,disabled:c,"aria-label":"Reload all plugins",children:[e.jsx(L,{className:`w-4 h-4 ${c?"animate-spin":""}`}),"Reload All"]})]})}),s&&e.jsx(_,{type:"error",title:"Error",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:s})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(T,{placeholder:"Search plugins by name or description...",value:y,onChange:b=>g(b.target.value),className:"pl-10","aria-label":"Search plugins"})]}),e.jsxs("div",{className:"w-64",children:[e.jsx(T,{placeholder:"Filter by type",value:j,onChange:b=>v(b.target.value),"aria-label":"Filter plugins by type",list:"plugin-types"}),e.jsxs("datalist",{id:"plugin-types",children:[e.jsx("option",{value:"authentication"}),e.jsx("option",{value:"template"}),e.jsx("option",{value:"response"}),e.jsx("option",{value:"datasource"})]})]}),e.jsxs("div",{className:"w-64",children:[e.jsx(T,{placeholder:"Filter by status",value:p,onChange:b=>i(b.target.value),"aria-label":"Filter plugins by status",list:"plugin-statuses"}),e.jsxs("datalist",{id:"plugin-statuses",children:[e.jsx("option",{value:"active"}),e.jsx("option",{value:"inactive"}),e.jsx("option",{value:"error"}),e.jsx("option",{value:"loading"})]})]})]}),e.jsxs($,{value:n,onValueChange:d,children:[e.jsxs(z,{children:[e.jsx(S,{value:"installed",children:"Installed Plugins"}),e.jsx(S,{value:"status",children:"System Status"}),e.jsx(S,{value:"marketplace",children:"Marketplace"})]}),e.jsx(P,{value:"installed",className:"space-y-6",children:r?e.jsx(x,{children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(L,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"Loading plugins..."})]})}):e.jsx(we,{filterType:j,filterStatus:p,onSelectPlugin:h},D)}),e.jsx(P,{value:"status",className:"space-y-6",children:e.jsx(ke,{})}),e.jsx(P,{value:"marketplace",className:"space-y-6",children:e.jsx(x,{children:e.jsx("div",{className:"p-6",children:e.jsx(de,{icon:e.jsx(xe,{className:"w-12 h-12 text-gray-400"}),title:"Plugin Marketplace",description:"Browse and install plugins from the official marketplace",action:e.jsxs(o,{className:"flex items-center gap-2",onClick:w,"aria-label":"Browse plugin marketplace",children:[e.jsx(G,{className:"w-4 h-4"}),"Browse Marketplace"]})})})})})]}),a&&e.jsx(be,{pluginId:a,onClose:()=>h(null)}),f&&e.jsx(Se,{onClose:()=>u(!1)})]})}export{Ae as PluginsPage};

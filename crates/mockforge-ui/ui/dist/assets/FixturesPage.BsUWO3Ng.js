import{r,j as e}from"./react-vendor.CjFKJWOU.js";import{c as K,z as le,P as z,E as $,F as L,A as ie,f as t,t as O,G,n as J,M as V,s as oe,j as F,H as ce,J as de,K as k,L as b,N as w,O as C,Q as S,U as M,V as E,l as U}from"./index.js";import{u as x}from"./index.BfCLqjMY.js";import"./chart-vendor.Bws7AqQX.js";import"./query-vendor.CB8uHlA8.js";import"./ui-vendor.B5WCADYB.js";import"./state-vendor.RQj9JU5O.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],xe=K("move",he);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ge=K("pen-line",me);function ke(){const[m,Q]=r.useState(""),[D,Y]=r.useState("all"),[s,q]=r.useState(null),[W,v]=r.useState(!1),[X,g]=r.useState(!1),[l,Z]=r.useState(null),[f,A]=r.useState(""),[ee,p]=r.useState(!1),[u,ae]=r.useState(null),[P,H]=r.useState(""),[se,j]=r.useState(!1),[n,I]=r.useState(null),{data:d,isLoading:te,error:_,refetch:N}=le(),h=(d==null?void 0:d.filter(a=>{var o,c;const i=m===""||a.path.toLowerCase().includes(m.toLowerCase())||((o=a.method)==null?void 0:o.toLowerCase().includes(m.toLowerCase()))||((c=a.protocol)==null?void 0:c.toLowerCase().includes(m.toLowerCase())),y=D==="all"||a.method===D;return i&&y}))||[],re=a=>{q(a),v(!0)},R=a=>{const i={fixture_id:a.id,method:a.method,path:a.path,protocol:a.protocol,saved_at:a.saved_at,fingerprint:a.fingerprint,metadata:a.metadata},y=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),o=URL.createObjectURL(y),c=document.createElement("a");c.href=o,c.download=`${a.id}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(o)},T=a=>{if(a===0)return"0 Bytes";const i=1024,y=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(a)/Math.log(i));return parseFloat((a/Math.pow(i,o)).toFixed(2))+" "+y[o]},B=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ne=a=>{switch(a==null?void 0:a.toUpperCase()){case"GET":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"POST":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"PUT":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"DELETE":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"PATCH":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}};return te?e.jsxs("div",{className:"space-y-8",children:[e.jsx(z,{title:"Mock Fixtures",subtitle:"Manage and organize your API response fixtures"}),e.jsx($,{icon:e.jsx(L,{className:"h-12 w-12"}),title:"Loading fixtures...",description:"Fetching fixture data from the server."})]}):_?e.jsxs("div",{className:"space-y-8",children:[e.jsx(z,{title:"Mock Fixtures",subtitle:"Manage and organize your API response fixtures"}),e.jsx(ie,{type:"error",title:"Failed to load fixtures",message:_ instanceof Error?_.message:"Unable to fetch fixture data. Please try again."})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsx(z,{title:"Mock Fixtures",subtitle:"Manage and organize your API response fixtures",action:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>N(),className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Refresh"]}),e.jsxs(t,{variant:"default",size:"sm",className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"New Fixture"]})]})}),e.jsx(J,{title:"Filter & Search",subtitle:"Find and organize your fixtures",children:e.jsx(V,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Search Fixtures"}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(F,{placeholder:"Search by name, path, or route...",value:m,onChange:a=>Q(a.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"HTTP Method"}),e.jsxs("select",{value:D,onChange:a=>Y(a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Methods"}),e.jsx("option",{value:"GET",children:"GET"}),e.jsx("option",{value:"POST",children:"POST"}),e.jsx("option",{value:"PUT",children:"PUT"}),e.jsx("option",{value:"DELETE",children:"DELETE"}),e.jsx("option",{value:"PATCH",children:"PATCH"}),e.jsx("option",{value:"HEAD",children:"HEAD"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Summary"}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:h.length}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:h.length===1?"Fixture":"Fixtures"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:T(h.reduce((a,i)=>a+(i.file_size||0),0))}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Size"})]})]})]})]})})}),e.jsx(J,{title:`Fixtures (${h.length})`,subtitle:"Your mock response fixtures and templates",children:e.jsx(V,{children:h.length===0?e.jsx($,{icon:e.jsx(L,{className:"h-12 w-12"}),title:"No fixtures found",description:(d==null?void 0:d.length)===0?"No fixtures have been created yet. Create your first fixture to get started.":"No fixtures match your current search criteria. Try adjusting your filters.",action:e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"Create First Fixture"]})}):e.jsx("div",{className:"space-y-4",children:h.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:"p-3 rounded-xl bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 flex-shrink-0",children:e.jsx(L,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:a.id}),a.method&&e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ne(a.method)}`,children:a.method})]}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:e.jsxs("span",{className:"truncate",title:a.path,children:["Path: ",a.path]})}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:T(a.file_size||0)}),e.jsx("span",{children:"•"}),e.jsx("span",{children:a.protocol}),e.jsx("span",{children:"•"}),e.jsx("span",{children:B(a.saved_at||"")})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>{Z(a),A(a.id),g(!0)},className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"Rename"]}),e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>{ae(a),p(!0)},className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),"Move"]}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>re(a),children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>R(a),children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>{I(a),j(!0)},className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/20",children:e.jsx(de,{className:"h-4 w-4"})})]})})]},a.id))})})}),e.jsx(k,{open:W,onOpenChange:v,children:e.jsxs(b,{className:"max-w-4xl",children:[e.jsxs(w,{children:[e.jsx(C,{children:s==null?void 0:s.id}),e.jsx(S,{onClick:()=>v(!1)})]}),e.jsxs(M,{children:[s==null?void 0:s.path," (",s==null?void 0:s.method,")"]}),e.jsx("div",{className:"py-4 overflow-y-auto max-h-[60vh]",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Method:"})," ",s==null?void 0:s.method]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Protocol:"})," ",s==null?void 0:s.protocol]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Size:"})," ",T((s==null?void 0:s.file_size)??0)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Saved:"})," ",B((s==null?void 0:s.saved_at)??"")]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Metadata"}),e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-4 text-sm overflow-x-auto max-h-96 overflow-y-auto",children:e.jsx("code",{className:"text-gray-900 dark:text-gray-100",children:JSON.stringify({id:s==null?void 0:s.id,protocol:s==null?void 0:s.protocol,method:s==null?void 0:s.method,path:s==null?void 0:s.path,saved_at:s==null?void 0:s.saved_at,file_size:s==null?void 0:s.file_size,file_path:s==null?void 0:s.file_path,fingerprint:s==null?void 0:s.fingerprint,metadata:s==null?void 0:s.metadata},null,2)})})]})]})}),e.jsxs(E,{children:[e.jsxs(t,{variant:"outline",onClick:()=>s&&R(s),className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Download"]}),e.jsx(t,{onClick:()=>v(!1),children:"Close"})]})]})}),e.jsx(k,{open:X,onOpenChange:g,children:e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Rename Fixture"}),e.jsx(S,{onClick:()=>g(!1)})]}),e.jsxs(M,{children:["Current name: ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:l==null?void 0:l.id})]}),e.jsx("div",{className:"py-4 space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"New Name"}),e.jsx(F,{value:f,onChange:a=>A(a.target.value),placeholder:"Enter new fixture name"})]})}),e.jsxs(E,{children:[e.jsx(t,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(t,{onClick:async()=>{if(l)try{await fetch(`/__mockforge/fixtures/${l.id}/rename`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_name:f})}),x.success("Fixture renamed successfully"),g(!1),N()}catch(a){U.error("Error renaming fixture",a),x.error("Failed to rename fixture")}},disabled:!f.trim()||f===(l==null?void 0:l.id),children:"Rename"})]})]})}),e.jsx(k,{open:ee,onOpenChange:p,children:e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Move Fixture"}),e.jsx(S,{onClick:()=>p(!1)})]}),e.jsxs(M,{children:["Moving: ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:u==null?void 0:u.id})]}),e.jsx("div",{className:"py-4 space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"New Path"}),e.jsx(F,{value:P,onChange:a=>H(a.target.value),placeholder:"Enter new path"})]})}),e.jsxs(E,{children:[e.jsx(t,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(t,{onClick:async()=>{if(u)try{await fetch(`/__mockforge/fixtures/${u.id}/move`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_path:P})}),x.success("Fixture moved successfully"),p(!1),H(""),N()}catch(a){U.error("Error moving fixture",a),x.error("Failed to move fixture")}},disabled:!P.trim(),children:"Move"})]})]})}),e.jsx(k,{open:se,onOpenChange:j,children:e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Delete Fixture"}),e.jsx(S,{onClick:()=>j(!1)})]}),e.jsx(M,{children:"Are you sure you want to delete this fixture? This action cannot be undone."}),e.jsx("div",{className:"py-4",children:e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:n==null?void 0:n.id}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:[n==null?void 0:n.path," (",n==null?void 0:n.method,")"]})]})})}),e.jsxs(E,{children:[e.jsx(t,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(t,{variant:"default",onClick:async()=>{if(n)try{await fetch(`/__mockforge/fixtures/${n.id}`,{method:"DELETE"}),x.success("Fixture deleted successfully"),j(!1),I(null),N()}catch(a){U.error("Error deleting fixture",a),x.error("Failed to delete fixture")}},className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})})]})}export{ke as FixturesPage};

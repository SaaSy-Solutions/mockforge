import{r as c,j as e}from"./react-vendor.CjFKJWOU.js";import{c as we,a as ke,m as Oe,T as L,f as o,aq as Ye,ar as Je,as as X,at as Z,aj as ts,ay as j,ai as ge,l as W,D as _s,a5 as We,A as _e,az as Ws,H as $e,aA as Rs,R as Ps,t as ns,K as z,a1 as de,L as H,N as $,O as K,U as Y,j as B,V as te,ax as Re,q as Ts,a7 as ve,aB as Is,aC as As,G as is,aD as Ke,aE as Be,J as qs,F as zs}from"./index.js";import{C as v,a as D,b as F,c as J,d as w}from"./Card.DLDyS9TF.js";import{L as u,T as ie}from"./textarea.BzH1jVce.js";import{B as R}from"./Badge.HqBhlCiq.js";import{u as d}from"./index.BfCLqjMY.js";import{P as hs}from"./play.DFhY6Mwp.js";import{S as Ne}from"./shield.D3o1gwXi.js";import{G as Hs}from"./grip-vertical.Dc5g53Kr.js";import{H as cs}from"./history.CF46tFWb.js";import"./chart-vendor.Bws7AqQX.js";import"./query-vendor.CB8uHlA8.js";import"./ui-vendor.B5WCADYB.js";import"./state-vendor.RQj9JU5O.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ks=we("check",$s);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ls=we("folder",Bs);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Vs=we("key",Ls);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],os=we("lock-open",Ms);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ds=we("lock",Gs),Pe=c.createContext(null),ms=({children:a,value:x,onValueChange:l,defaultValue:N,id:r})=>{const[h,m]=c.useState(N||x||""),[V,g]=c.useState([]),y=x||h,M=O=>{m(O),l==null||l(O)},P=c.useCallback((O,T)=>{g(Q=>Q.some(I=>I.value===O)?Q:[...Q,{value:O,label:T}])},[]);return e.jsx(Pe.Provider,{value:{value:y,onValueChange:M,id:r,options:V,addOption:P},children:a})},xs=({placeholder:a,children:x})=>{const l=c.useContext(Pe);return e.jsx("span",{children:x||(l==null?void 0:l.value)||a})},Ge=c.forwardRef(({className:a,children:x,...l},N)=>{const r=c.useContext(Pe);return e.jsx("select",{ref:N,id:r==null?void 0:r.id,role:"combobox",value:r==null?void 0:r.value,onChange:h=>r==null?void 0:r.onValueChange(h.target.value),className:ke("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:r==null?void 0:r.options.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))})});Ge.displayName="SelectTrigger";const Ue=c.forwardRef(({className:a,children:x,position:l="popper",...N},r)=>e.jsx("div",{ref:r,"data-select-content":!0,className:ke("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md p-1 hidden",a),...N,children:x}));Ue.displayName="SelectContent";const Us=c.forwardRef(({className:a,...x},l)=>e.jsx("div",{ref:l,className:ke("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...x}));Us.displayName="SelectLabel";const _=c.forwardRef(({className:a,children:x,value:l,...N},r)=>{const h=c.useContext(Pe);return c.useEffect(()=>{h&&typeof x=="string"&&h.addOption(l,x)},[h,l,x]),e.jsxs("div",{ref:r,className:ke("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),"data-value":l,...N,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ks,{className:"h-4 w-4"})}),x]})});_.displayName="SelectItem";const Ys=c.forwardRef(({className:a,...x},l)=>e.jsx("div",{ref:l,className:ke("-mx-1 my-1 h-px bg-muted",a),...x}));Ys.displayName="SelectSeparator";const Js=({workspaceId:a,requestId:x,requestName:l,onExecuteRequest:N})=>{const[r,h]=c.useState([]),[m,V]=c.useState(!0),[g,y]=c.useState(!1),[M,P]=c.useState(null),O=async()=>{try{V(!0),P(null);const i=await j.getRequestHistory(a,x);h(i.history)}catch(i){P(i instanceof Error?i.message:"Failed to load history"),d.error("Failed to load request history")}finally{V(!1)}},T=async()=>{try{y(!0);const i=await j.executeRequest(a,x);h(b=>[i.execution,...b]),d.success("Request executed successfully"),N==null||N()}catch(i){d.error(i instanceof Error?i.message:"Failed to execute request")}finally{y(!1)}};c.useEffect(()=>{O()},[a,x]);const Q=i=>i<1e3?`${i}ms`:`${(i/1e3).toFixed(2)}s`,I=i=>i<1024?`${i}B`:i<1024*1024?`${(i/1024).toFixed(1)}KB`:`${(i/(1024*1024)).toFixed(1)}MB`,G=i=>i>=200&&i<300?"bg-green-500":i>=300&&i<400?"bg-blue-500":i>=400&&i<500?"bg-yellow-500":"bg-red-500",ee=i=>i>=200&&i<300?e.jsx(ge,{className:"w-4 h-4 text-green-500"}):i>=300&&i<400?e.jsx(L,{className:"w-4 h-4 text-blue-500"}):i>=400&&i<500?e.jsx(L,{className:"w-4 h-4 text-yellow-500"}):e.jsx(ts,{className:"w-4 h-4 text-red-500"});return m&&r.length===0?e.jsxs(v,{children:[e.jsxs(D,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Response History"]}),e.jsxs(J,{children:["Execution history for ",l]})]}),e.jsx(w,{children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})})]}):M&&r.length===0?e.jsxs(v,{children:[e.jsxs(D,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Response History"]}),e.jsxs(J,{children:["Execution history for ",l]})]}),e.jsx(w,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(L,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-red-600",children:M}),e.jsx(o,{onClick:O,className:"mt-4",children:"Retry"})]})})]}):e.jsxs(v,{children:[e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Response History"]}),e.jsxs(J,{children:[r.length," execution",r.length!==1?"s":""," for ",l]})]}),e.jsxs(o,{onClick:T,disabled:g,className:"flex items-center gap-2",children:[e.jsx(hs,{className:"w-4 h-4"}),g?"Executing...":"Execute Request"]})]})}),e.jsx(w,{children:r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Oe,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No executions yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Execute the request to see history"})]}):e.jsx("div",{className:"space-y-4",children:r.map(i=>e.jsx(v,{className:"border-l-4 border-l-blue-500",children:e.jsxs(w,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[ee(i.response_status_code),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"default",className:G(i.response_status_code),children:i.response_status_code}),e.jsx("span",{className:"font-medium",children:i.request_method}),e.jsx("span",{className:"text-gray-600",children:i.request_path})]}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:new Date(i.executed_at).toLocaleString()})]})]}),e.jsxs("div",{className:"text-right text-sm text-gray-500",children:[e.jsx("div",{children:Q(i.response_time_ms)}),e.jsx("div",{children:I(i.response_size_bytes)})]})]}),e.jsxs(Ye,{defaultValue:"response",className:"w-full",children:[e.jsxs(Je,{className:"grid w-full grid-cols-3",children:[e.jsx(X,{value:"response",children:"Response"}),e.jsx(X,{value:"request",children:"Request"}),e.jsx(X,{value:"headers",children:"Headers"})]}),e.jsx(Z,{value:"response",className:"mt-3",children:i.error_message?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-700 font-medium mb-2",children:[e.jsx(ts,{className:"w-4 h-4"}),"Error"]}),e.jsx("pre",{className:"text-red-600 text-sm whitespace-pre-wrap",children:i.error_message})]}):e.jsx("div",{className:"bg-gray-50 border rounded p-3",children:e.jsx("pre",{className:"text-sm whitespace-pre-wrap overflow-x-auto",children:i.response_body||"(empty response)"})})}),e.jsx(Z,{value:"request",className:"mt-3",children:e.jsxs("div",{className:"space-y-3",children:[i.request_body&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Request Body"}),e.jsx("div",{className:"bg-gray-50 border rounded p-3",children:e.jsx("pre",{className:"text-sm whitespace-pre-wrap overflow-x-auto",children:i.request_body})})]}),Object.keys(i.request_headers).length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Request Headers"}),e.jsx("div",{className:"bg-gray-50 border rounded p-3",children:Object.entries(i.request_headers).map(([b,k])=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:[b,":"]})," ",String(k)]},b))})]})]})}),e.jsx(Z,{value:"headers",className:"mt-3",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Response Headers"}),e.jsx("div",{className:"bg-gray-50 border rounded p-3",children:Object.keys(i.response_headers).length>0?Object.entries(i.response_headers).map(([b,k])=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:[b,":"]})," ",String(k)]},b)):e.jsx("span",{className:"text-gray-500 text-sm",children:"(no headers)"})})]})})})]})]})},i.executed_at))})})]})};function Le({children:a,className:x}){return e.jsx("h4",{className:x,children:a})}function Ve({children:a,className:x}){return e.jsx("div",{className:x,children:a})}const Xs=({workspaceId:a,workspaceName:x})=>{var le,Fe,oe,xe,fe,se,he;const[l,N]=c.useState({enabled:!1,masterKeySet:!1,workspaceKeySet:!1}),[r,h]=c.useState({enabled:!1,sensitiveHeaders:["authorization","x-api-key","x-auth-token","cookie"],sensitiveFields:["password","token","secret","key","credentials"],sensitiveEnvVars:["API_KEY","SECRET_KEY","PASSWORD","TOKEN","DATABASE_URL"],customPatterns:[]}),[m,V]=c.useState(null),[g,y]=c.useState(!1),[M,P]=c.useState(!1),[O,T]=c.useState(!1),[Q,I]=c.useState(!1),[G,ee]=c.useState(""),[i,b]=c.useState(""),[k,be]=c.useState(""),C=c.useCallback(async()=>{try{const t=await j.getWorkspaceEncryptionStatus(a);N(t)}catch(t){W.error("Failed to load encryption status",t)}},[a]),ce=c.useCallback(async()=>{try{const t=await j.getWorkspaceEncryptionConfig(a);h(t)}catch(t){W.error("Failed to load encryption config",t)}},[a]);c.useEffect(()=>{C(),ce()},[C,ce]);const Ce=async()=>{y(!0);try{await j.enableWorkspaceEncryption(a),d.success("Encryption enabled for workspace"),await C()}catch(t){d.error("Failed to enable encryption"),W.error("Error enabling encryption",t)}finally{y(!1)}},Te=async()=>{if(confirm("Are you sure you want to disable encryption? This will remove all encrypted data.")){y(!0);try{await j.disableWorkspaceEncryption(a),d.success("Encryption disabled for workspace"),await C()}catch(t){d.error("Failed to disable encryption"),W.error("Error disabling encryption",t)}finally{y(!1)}}},ye=async()=>{y(!0);try{const t=await j.checkWorkspaceSecurity(a);V(t),d.success("Security check completed")}catch(t){d.error("Failed to run security check"),W.error("Error running security check",t)}finally{y(!1)}},Se=async()=>{y(!0);try{await j.exportWorkspaceEncrypted(a,G),d.success(`Workspace exported successfully to ${G}`),T(!1),ee("")}catch(t){d.error("Failed to export workspace"),W.error("Error exporting workspace",t)}finally{y(!1)}},Ie=async()=>{y(!0);try{await j.importWorkspaceEncrypted(i,a,k),d.success("Workspace imported successfully"),I(!1),b(""),be(""),await C()}catch(t){d.error("Failed to import workspace"),W.error("Error importing workspace",t)}finally{y(!1)}},Ee=async()=>{y(!0);try{await j.updateWorkspaceEncryptionConfig(a,r),d.success("Encryption configuration updated")}catch(t){d.error("Failed to update configuration"),W.error("Error updating configuration",t)}finally{y(!1)}},A=()=>{l.backupKey&&(navigator.clipboard.writeText(l.backupKey),d.success("Backup key copied to clipboard"))},De=t=>{switch(t){case"critical":return"text-red-600 bg-red-50 border-red-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},me=t=>{switch(t){case"critical":return e.jsx(L,{className:"w-4 h-4"});case"high":return e.jsx(L,{className:"w-4 h-4"});case"medium":return e.jsx(L,{className:"w-4 h-4"});case"low":return e.jsx($e,{className:"w-4 h-4"});default:return e.jsx($e,{className:"w-4 h-4"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ne,{className:"w-6 h-6 text-gray-900 dark:text-gray-100"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Encryption Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Secure your workspace with end-to-end encryption"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(R,{variant:l.enabled?"default":"secondary",children:[l.enabled?e.jsx(ds,{className:"w-3 h-3 mr-1"}):e.jsx(os,{className:"w-3 h-3 mr-1"}),l.enabled?"Encrypted":"Not Encrypted"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(v,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(F,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Vs,{className:"w-4 h-4"}),"Master Key"]})}),e.jsx(w,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[l.masterKeySet?e.jsx(ge,{className:"w-4 h-4 text-green-500"}):e.jsx(L,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"text-sm",children:l.masterKeySet?"Configured":"Not Set"})]})})]}),e.jsxs(v,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(F,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(_s,{className:"w-4 h-4"}),"Workspace Key"]})}),e.jsx(w,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[l.workspaceKeySet?e.jsx(ge,{className:"w-4 h-4 text-green-500"}):e.jsx(L,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"text-sm",children:l.workspaceKeySet?"Generated":"Not Generated"})]})})]}),e.jsxs(v,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(F,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(We,{className:"w-4 h-4"}),"Auto Encryption"]})}),e.jsx(w,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[r.enabled?e.jsx(ge,{className:"w-4 h-4 text-green-500"}):e.jsx(L,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"text-sm",children:r.enabled?"Enabled":"Disabled"})]})})]})]}),e.jsxs(Ye,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(Je,{className:"grid w-full grid-cols-4",children:[e.jsx(X,{value:"overview",children:"Overview"}),e.jsx(X,{value:"security",children:"Security"}),e.jsx(X,{value:"export",children:"Export/Import"}),e.jsx(X,{value:"settings",children:"Settings"})]}),e.jsx(Z,{value:"overview",className:"space-y-4",children:e.jsxs(v,{children:[e.jsxs(D,{children:[e.jsx(F,{children:"Workspace Encryption Overview"}),e.jsxs(J,{children:['Manage encryption settings for workspace "',x,'"']})]}),e.jsxs(w,{className:"space-y-4",children:[l.enabled?e.jsxs(_e,{className:"border-green-200 bg-green-50",children:[e.jsx(ge,{className:"h-4 w-4 text-green-600"}),e.jsx(Le,{className:"text-green-800",children:"Encryption Enabled"}),e.jsx(Ve,{className:"text-green-700",children:"This workspace is protected with end-to-end encryption. Sensitive data is automatically encrypted."})]}):e.jsxs(_e,{children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx(Le,{children:"Encryption Not Enabled"}),e.jsx(Ve,{children:"This workspace is not encrypted. Enable encryption to protect sensitive data like API keys, passwords, and tokens."})]}),e.jsxs("div",{className:"flex gap-2",children:[l.enabled?e.jsxs(o,{variant:"outline",onClick:Te,disabled:g,children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),g?"Disabling...":"Disable Encryption"]}):e.jsxs(o,{onClick:Ce,disabled:g,children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),g?"Enabling...":"Enable Encryption"]}),e.jsxs(o,{variant:"outline",onClick:ye,disabled:g,children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),g?"Checking...":"Security Check"]})]}),l.backupKey&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Backup Key"}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[e.jsx("code",{className:"flex-1 font-mono text-sm",children:M?l.backupKey:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢-â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢-â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢-â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢-â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢-â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢-â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢-â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>P(!M),children:M?e.jsx(Ws,{className:"w-4 h-4"}):e.jsx($e,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:A,children:e.jsx(Rs,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"âš ï¸ Keep this backup key safe! You'll need it to access encrypted data on other devices."})]})]})]})}),e.jsx(Z,{value:"security",className:"space-y-4",children:e.jsxs(v,{children:[e.jsxs(D,{children:[e.jsx(F,{children:"Security Analysis"}),e.jsx(J,{children:"Check for unencrypted sensitive data in your workspace"})]}),e.jsx(w,{children:m?e.jsxs("div",{className:"space-y-4",children:[m.isSecure?e.jsxs(_e,{className:"border-green-200 bg-green-50",children:[e.jsx(ge,{className:"h-4 w-4 text-green-600"}),e.jsx(Le,{className:"text-green-800",children:"Security Check Passed"}),e.jsx(Ve,{className:"text-green-700",children:"No security issues found in this workspace."})]}):e.jsxs(e.Fragment,{children:[m.warnings&&m.warnings.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium text-orange-800",children:["Warnings (",m.warnings.length,")"]}),e.jsx("div",{className:"space-y-2",children:m.warnings.map((t,f)=>e.jsx("div",{className:`p-3 border rounded-lg ${De(t.severity)}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[me(t.severity),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t.message}),e.jsxs("div",{className:"text-sm opacity-75",children:["Location: ",t.location]}),e.jsxs("div",{className:"text-sm mt-1",children:["ðŸ’¡ ",t.suggestion]})]})]})},f))})]}),m.errors&&m.errors.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium text-red-800",children:["Errors (",m.errors.length,")"]}),e.jsx("div",{className:"space-y-2",children:m.errors.map((t,f)=>e.jsx("div",{className:`p-3 border rounded-lg ${De(t.severity)}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[me(t.severity),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t.message}),e.jsxs("div",{className:"text-sm opacity-75",children:["Location: ",t.location]}),e.jsxs("div",{className:"text-sm mt-1",children:["ðŸ’¡ ",t.suggestion]})]})]})},f))})]}),m.recommendations&&m.recommendations.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Recommendations"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:m.recommendations.map((t,f)=>e.jsx("li",{children:t},f))})]})]}),e.jsxs(o,{variant:"outline",onClick:ye,disabled:g,children:[e.jsx(Ps,{className:"w-4 h-4 mr-2"}),g?"Running...":"Re-run Security Check"]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ne,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Security Check Run"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Run a security check to identify unencrypted sensitive data in your workspace."}),e.jsxs(o,{onClick:ye,disabled:g,children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),g?"Running...":"Run Security Check"]})]})})]})}),e.jsx(Z,{value:"export",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(v,{children:[e.jsxs(D,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4"}),"Export Encrypted"]}),e.jsx(J,{children:"Export workspace with encryption for secure sharing"})]}),e.jsx(w,{children:e.jsxs(z,{open:O,onOpenChange:T,children:[e.jsx(de,{asChild:!0,children:e.jsx(o,{asChild:!0,className:"w-full",disabled:!l.enabled,children:e.jsxs("div",{children:[e.jsx(ns,{className:"w-4 h-4 mr-2"}),"Export Encrypted Workspace"]})})}),e.jsxs(H,{children:[e.jsxs($,{children:[e.jsx(K,{children:"Export Encrypted Workspace"}),e.jsxs(Y,{children:['Export workspace "',x,`" with encryption applied. You'll need the backup key to import on other devices.`]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(u,{htmlFor:"export-path",children:"Export Path"}),e.jsx(B,{id:"export-path",value:G,onChange:t=>ee(t.target.value),placeholder:"/path/to/workspace.enc"})]})}),e.jsxs(te,{children:[e.jsx(o,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsx(o,{onClick:Se,disabled:!G.trim()||g,children:g?"Exporting...":"Export"})]})]})]})})]}),e.jsxs(v,{children:[e.jsxs(D,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),"Import Encrypted"]}),e.jsx(J,{children:"Import encrypted workspace from another device"})]}),e.jsx(w,{children:e.jsxs(z,{open:Q,onOpenChange:I,children:[e.jsx(de,{asChild:!0,children:e.jsx(o,{asChild:!0,variant:"outline",className:"w-full",children:e.jsxs("div",{children:[e.jsx(Re,{className:"w-4 h-4 mr-2"}),"Import Encrypted Workspace"]})})}),e.jsxs(H,{children:[e.jsxs($,{children:[e.jsx(K,{children:"Import Encrypted Workspace"}),e.jsx(Y,{children:"Import an encrypted workspace. You'll need the backup key from the original device."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"import-path",children:"Import Path"}),e.jsx(B,{id:"import-path",value:i,onChange:t=>b(t.target.value),placeholder:"/path/to/workspace.enc"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"backup-key",children:"Backup Key"}),e.jsx(B,{id:"backup-key",value:k,onChange:t=>be(t.target.value),placeholder:"YKV2DK-HT1MD0-8EB48W-..."})]})]}),e.jsxs(te,{children:[e.jsx(o,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),e.jsx(o,{onClick:Ie,disabled:!i.trim()||!k.trim()||g,children:g?"Importing...":"Import"})]})]})]})})]})]})}),e.jsx(Z,{value:"settings",className:"space-y-4",children:e.jsxs(v,{children:[e.jsxs(D,{children:[e.jsx(F,{children:"Auto Encryption Settings"}),e.jsx(J,{children:"Configure automatic encryption for sensitive data"})]}),e.jsxs(w,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{className:"text-base",children:"Enable Auto Encryption"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Automatically encrypt sensitive data when detected"})]}),e.jsx(Ts,{checked:r.enabled,onCheckedChange:t=>h({...r,enabled:t}),disabled:!l.enabled})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{className:"text-base",children:"Sensitive Headers"}),e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Headers that contain sensitive data and should be automatically encrypted"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(le=r.sensitiveHeaders)==null?void 0:le.map((t,f)=>e.jsx(R,{variant:"secondary",children:t},f))}),e.jsx(ie,{value:((Fe=r.sensitiveHeaders)==null?void 0:Fe.join(`
`))||"",onChange:t=>h({...r,sensitiveHeaders:t.target.value.split(`
`).filter(f=>f.trim())}),placeholder:`authorization
x-api-key
x-auth-token
cookie`,className:"font-mono text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{className:"text-base",children:"Sensitive JSON Fields"}),e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"JSON field names that contain sensitive data"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(oe=r.sensitiveFields)==null?void 0:oe.map((t,f)=>e.jsx(R,{variant:"secondary",children:t},f))}),e.jsx(ie,{value:((xe=r.sensitiveFields)==null?void 0:xe.join(`
`))||"",onChange:t=>h({...r,sensitiveFields:t.target.value.split(`
`).filter(f=>f.trim())}),placeholder:`password
token
secret
key
credentials`,className:"font-mono text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{className:"text-base",children:"Sensitive Environment Variables"}),e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Environment variable names that contain sensitive data"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(fe=r.sensitiveEnvVars)==null?void 0:fe.map((t,f)=>e.jsx(R,{variant:"secondary",children:t},f))}),e.jsx(ie,{value:((se=r.sensitiveEnvVars)==null?void 0:se.join(`
`))||"",onChange:t=>h({...r,sensitiveEnvVars:t.target.value.split(`
`).filter(f=>f.trim())}),placeholder:`API_KEY
SECRET_KEY
PASSWORD
TOKEN
DATABASE_URL`,className:"font-mono text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{className:"text-base",children:"Custom Patterns (Regex)"}),e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Regular expressions to detect additional sensitive patterns"}),e.jsx(ie,{value:((he=r.customPatterns)==null?void 0:he.join(`
`))||"",onChange:t=>h({...r,customPatterns:t.target.value.split(`
`).filter(f=>f.trim())}),placeholder:`\\\\b\\\\d{4}[\\\\-\\\\s]?\\\\d{4}[\\\\-\\\\s]?\\\\d{4}[\\\\-\\\\s]?\\\\d{4}\\\\b
\\\\b\\\\d{3}[\\\\-\\\\s]?\\\\d{2}[\\\\-\\\\s]?\\\\d{4}\\\\b`,className:"font-mono text-sm"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(o,{onClick:Ee,disabled:g,children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),g?"Saving...":"Save Settings"]})})]})]})})]})]})};function Zs(a){if(a instanceof Error)return a.message;if(typeof a=="string")return a;if(a&&typeof a=="object"){if("message"in a&&typeof a.message=="string")return a.message;if("error"in a&&typeof a.error=="string")return a.error}return"An unexpected error occurred"}function ne(a){if(a instanceof TypeError&&a.message.includes("fetch"))return{message:"Network error: Unable to connect to the server",type:"network"};if(a instanceof Error&&a.message.startsWith("HTTP error! status:")){const x=a.message.match(/status: (\d+)/),l=x?parseInt(x[1],10):void 0;return{message:Qs(l),type:"server",statusCode:l,details:a}}return a&&typeof a=="object"&&"issues"in a?{message:"Invalid data received from server",type:"validation",details:a}:{message:Zs(a),type:"unknown",details:a}}function Qs(a){if(!a)return"Server error occurred";switch(a){case 400:return"Bad request: Please check your input";case 401:return"Unauthorized: Please log in again";case 403:return"Forbidden: You do not have permission to perform this action";case 404:return"Resource not found";case 409:return"Conflict: Resource already exists or cannot be modified";case 422:return"Validation error: Please check your input";case 429:return"Too many requests: Please try again later";case 500:return"Internal server error";case 502:return"Bad gateway: Server is temporarily unavailable";case 503:return"Service unavailable: Please try again later";case 504:return"Gateway timeout: Server took too long to respond";default:return a>=400&&a<500?"Client error occurred":a>=500?"Server error occurred":"An error occurred"}}function Me(a){return a.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim()}function ea(a,x={}){var h;const{maxSize:l=10*1024*1024,allowedTypes:N=[],allowedExtensions:r=[]}=x;if(a.size>l)return{valid:!1,error:`File size exceeds maximum allowed size of ${(l/(1024*1024)).toFixed(1)}MB`};if(N.length>0&&!N.includes(a.type))return{valid:!1,error:`File type "${a.type}" is not allowed`};if(r.length>0){const m=(h=a.name.split(".").pop())==null?void 0:h.toLowerCase();if(!m||!r.includes(m))return{valid:!1,error:`File extension "${m}" is not allowed`}}return{valid:!0}}const ua=()=>{var es,ss,as;const{workspaces:a,loading:x,error:l,setActiveWorkspaceById:N}=ve(),[r,h]=c.useState(null),[m,V]=c.useState(null),[g,y]=c.useState(!1),[M,P]=c.useState(!1),[O,T]=c.useState(!1),[Q,I]=c.useState(!1),[G,ee]=c.useState(!1),[i,b]=c.useState(!1),[k,be]=c.useState(null),[C,ce]=c.useState(new Set),[Ce,Te]=c.useState([]),[ye,Se]=c.useState(!1),[Ie,Ee]=c.useState(!1),[A,De]=c.useState(null),[me,le]=c.useState(null),[Fe,oe]=c.useState(!1),[xe,fe]=c.useState(null),[se,he]=c.useState({name:"",description:""}),[t,f]=c.useState(!1),[Ae,Xe]=c.useState(""),[qe,Ze]=c.useState({directory:""}),[ae,ze]=c.useState({name:"",description:""}),[E,pe]=c.useState({name:"",method:"GET",path:"",status_code:200,response_body:""}),[U,ue]=c.useState({format:"postman",data:"",create_folders:!0}),ps=Is();c.useEffect(()=>{G&&Ss()},[G]);const us=async()=>{try{const s=await j.createWorkspace(se);if(d.success("Workspace created successfully"),t&&Ae.trim())try{await j.configureSync(s.data.id,{target_directory:Ae,sync_direction:"Bidirectional",realtime_monitoring:!0}),d.success("Sync configured successfully")}catch(p){const S=ne(p);d.error(`Workspace created but sync configuration failed: ${S.message}`)}y(!1),he({name:"",description:""}),f(!1),Xe("");const{refreshWorkspaces:n}=ve.getState();await n()}catch(s){const n=ne(s);d.error(`Failed to create workspace: ${n.message}`)}},js=async()=>{try{const s=Me(qe.directory);await j.openWorkspaceFromDirectory(s),d.success("Workspace opened from directory successfully"),P(!1),Ze({directory:""});const{refreshWorkspaces:n}=ve.getState();await n()}catch(s){const n=ne(s);d.error(`Failed to open workspace: ${n.message}`)}},gs=async()=>{if(xe)try{await j.deleteWorkspace(xe),d.success("Workspace deleted successfully");const{refreshWorkspaces:s}=ve.getState();await s(),(r==null?void 0:r.summary.id)===xe&&h(null),oe(!1),fe(null)}catch(s){const n=ne(s);d.error(`Failed to delete workspace: ${n.message}`)}},ys=s=>{fe(s),oe(!0)},fs=async s=>{try{await N(s),d.success("Active workspace updated")}catch(n){const p=ne(n);d.error(`Failed to set active workspace: ${p.message}`)}},vs=async s=>{try{const n=await j.getWorkspace(s.id);h(n.workspace),V(null)}catch(n){const p=ne(n);d.error(`Failed to load workspace: ${p.message}`)}},Ns=async s=>{if(r)try{const n=await j.getFolder(r.summary.id,s);V(n.folder)}catch(n){const p=ne(n);d.error(`Failed to load folder: ${p.message}`)}},ws=async()=>{if(!r)return;if(!ae.name.trim()){d.error("Folder name is required");return}const s={name:Me(ae.name),description:ae.description?Me(ae.description):void 0};try{await j.createFolder(r.summary.id,s),d.success("Folder created successfully"),T(!1),ze({name:"",description:""});const n=await j.getWorkspace(r.summary.id);h(n.workspace)}catch(n){const p=ne(n);d.error(`Failed to create folder: ${p.message}`)}},ks=async()=>{if(!r)return;const s={...E,folder_id:m==null?void 0:m.summary.id};try{await j.createRequest(r.summary.id,s),d.success("Request created successfully"),I(!1),pe({name:"",method:"GET",path:"",status_code:200,response_body:""});const n=await j.getWorkspace(r.summary.id);if(h(n.workspace),m){const p=await j.getFolder(r.summary.id,m.summary.id);V(p.folder)}}catch(n){d.error("Failed to create request"),W.error("Error creating request",n)}},Qe=(s,n)=>{De({id:s,name:n}),Se(!0)},bs=async()=>{if(!r)return;const s={...U,folder_id:m==null?void 0:m.summary.id,selected_routes:Array.from(C)};try{await j.importToWorkspace(r.summary.id,s),d.success("Import completed successfully"),ee(!1),b(!1),ue({format:"postman",data:"",create_folders:!0});const n=await j.getWorkspace(r.summary.id);h(n.workspace)}catch(n){d.error("Failed to import data"),W.error("Error importing data",n)}},Cs=async()=>{var s;try{const n={...U,folder_id:m==null?void 0:m.summary.id},p=await j.previewImport(n);be(p),ce(new Set(((s=p.routes)==null?void 0:s.map((S,re)=>re))||[])),ee(!1),b(!0)}catch(n){d.error("Failed to preview import"),W.error("Error previewing import",n)}},Ss=async()=>{try{const s=await As.getImportHistory();Te(s.imports||[])}catch(s){W.error("Failed to load import history",s)}},Es=s=>{ue({format:s.format,data:"",create_folders:!0}),d.info(`Format set to ${s.format}. Please paste or upload the data again.`)},Ds=(s,n)=>{le(n),s.dataTransfer.effectAllowed="move"},Fs=s=>{s.preventDefault(),s.dataTransfer.dropEffect="move"},Os=async(s,n)=>{if(s.preventDefault(),!me||me===n||!a){le(null);return}try{const p=a.findIndex(q=>q.id===me),S=a.findIndex(q=>q.id===n);if(p===-1||S===-1){le(null);return}const re=[...a],[He]=re.splice(p,1);re.splice(S,0,He);const je=re.map(q=>q.id);try{await ps.mutateAsync(je),d.success("Workspace order updated")}catch(q){throw d.error("Failed to update workspace order"),q}}catch{d.error("Failed to update workspace order");const{refreshWorkspaces:p}=ve.getState();await p()}finally{le(null)}};return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading workspaces..."})}):l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-red-500",children:l})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Workspaces"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your mock API workspaces"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(z,{open:g,onOpenChange:y,children:[e.jsx(de,{asChild:!0,children:e.jsxs(o,{children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),"New Workspace"]})}),e.jsxs(H,{className:"bg-white dark:bg-gray-900",children:[e.jsxs($,{className:"space-y-2",children:[e.jsx(K,{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Create New Workspace"}),e.jsx(Y,{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:"Create a new workspace to organize your mock API endpoints."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"workspace-name",className:"text-gray-900 dark:text-gray-100",children:"Name"}),e.jsx(B,{id:"workspace-name",value:se.name,onChange:s=>he({...se,name:s.target.value}),placeholder:"My Workspace",className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder:text-gray-500 dark:placeholder:text-gray-400"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"workspace-description",className:"text-gray-900 dark:text-gray-100",children:"Description"}),e.jsx(ie,{id:"workspace-description",value:se.description,onChange:s=>he({...se,description:s.target.value}),placeholder:"Optional description...",className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder:text-gray-500 dark:placeholder:text-gray-400"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ke,{id:"enable-sync",checked:t,onCheckedChange:f}),e.jsx(u,{htmlFor:"enable-sync",className:"text-gray-900 dark:text-gray-100",children:"Enable directory sync"})]}),t&&e.jsxs("div",{children:[e.jsx(u,{htmlFor:"sync-directory",className:"text-gray-900 dark:text-gray-100",children:"Sync Directory"}),e.jsx(B,{id:"sync-directory",value:Ae,onChange:s=>Xe(s.target.value),placeholder:"/path/to/workspace",className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder:text-gray-500 dark:placeholder:text-gray-400"})]})]}),e.jsxs(te,{children:[e.jsx(o,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(o,{onClick:us,disabled:!se.name.trim(),children:"Create Workspace"})]})]})]}),e.jsxs(z,{open:M,onOpenChange:P,children:[e.jsx(de,{asChild:!0,children:e.jsxs(o,{variant:"outline",children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),"Open from Directory"]})}),e.jsxs(H,{children:[e.jsxs($,{children:[e.jsx(K,{children:"Open Workspace from Directory"}),e.jsx(Y,{children:"Open an existing workspace from a directory on your system."})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(u,{htmlFor:"directory-path",children:"Directory Path"}),e.jsx(B,{id:"directory-path",value:qe.directory,onChange:s=>Ze({directory:s.target.value}),placeholder:"/path/to/workspace"})]})}),e.jsxs(te,{children:[e.jsx(o,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(o,{onClick:js,disabled:!qe.directory.trim(),children:"Open Workspace"})]})]})]})]})]}),a&&a.length===0?e.jsx(v,{className:"col-span-full",children:e.jsxs(w,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Be,{className:"w-16 h-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Workspaces Yet"}),e.jsx("p",{className:"text-muted-foreground mb-6 text-center max-w-md",children:"Get started by creating a new workspace or opening an existing one from a directory."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{onClick:()=>y(!0),children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),"Create Workspace"]}),e.jsxs(o,{variant:"outline",onClick:()=>P(!0),children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),"Open from Directory"]})]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a==null?void 0:a.map(s=>e.jsxs(v,{className:`cursor-pointer transition-all hover:shadow-md ${(r==null?void 0:r.summary.id)===s.id?"ring-2 ring-primary":""}`,draggable:!0,onDragStart:n=>Ds(n,s.id),onDragOver:Fs,onDrop:n=>Os(n,s.id),children:[e.jsxs(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Hs,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(F,{className:"text-lg",children:s.name}),s.is_active&&e.jsx(R,{variant:"secondary",children:"Active"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),fs(s.id)},disabled:s.is_active,children:e.jsx(hs,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),ys(s.id)},children:e.jsx(qs,{className:"w-4 h-4"})})]})]}),e.jsxs(w,{onClick:()=>vs(s),children:[e.jsx(J,{className:"mb-4",children:s.description||"No description"}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:[s.request_count," requests"]}),e.jsxs("span",{children:[s.folder_count," folders"]})]})]})]},s.id))}),r&&e.jsxs(v,{children:[e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(F,{children:r.summary.name}),e.jsx(J,{children:r.summary.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(z,{open:O,onOpenChange:T,children:[e.jsx(de,{asChild:!0,children:e.jsxs(o,{variant:"outline",size:"sm",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"New Folder"]})}),e.jsxs(H,{children:[e.jsxs($,{children:[e.jsx(K,{children:"Create New Folder"}),e.jsx(Y,{children:"Create a new folder to organize requests in this workspace."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"folder-name",children:"Name"}),e.jsx(B,{id:"folder-name",value:ae.name,onChange:s=>ze({...ae,name:s.target.value}),placeholder:"My Folder"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"folder-description",children:"Description"}),e.jsx(ie,{id:"folder-description",value:ae.description,onChange:s=>ze({...ae,description:s.target.value}),placeholder:"Optional description..."})]})]}),e.jsxs(te,{children:[e.jsx(o,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsx(o,{onClick:ws,disabled:!ae.name.trim(),children:"Create Folder"})]})]})]}),e.jsxs(z,{open:Q,onOpenChange:I,children:[e.jsx(de,{asChild:!0,children:e.jsxs(o,{variant:"outline",size:"sm",children:[e.jsx(zs,{className:"w-4 h-4 mr-2"}),"New Request"]})}),e.jsxs(H,{className:"max-w-2xl",children:[e.jsxs($,{children:[e.jsx(K,{children:"Create New Request"}),e.jsx(Y,{children:"Create a new mock request in this workspace."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"request-name",children:"Name"}),e.jsx(B,{id:"request-name",value:E.name,onChange:s=>pe({...E,name:s.target.value}),placeholder:"My Request"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"request-method",children:"Method"}),e.jsxs(ms,{value:E.method,onValueChange:s=>pe({...E,method:s}),children:[e.jsx(Ge,{children:e.jsx(xs,{})}),e.jsxs(Ue,{children:[e.jsx(_,{value:"GET",children:"GET"}),e.jsx(_,{value:"POST",children:"POST"}),e.jsx(_,{value:"PUT",children:"PUT"}),e.jsx(_,{value:"DELETE",children:"DELETE"}),e.jsx(_,{value:"PATCH",children:"PATCH"}),e.jsx(_,{value:"HEAD",children:"HEAD"}),e.jsx(_,{value:"OPTIONS",children:"OPTIONS"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"request-path",children:"Path"}),e.jsx(B,{id:"request-path",value:E.path,onChange:s=>pe({...E,path:s.target.value}),placeholder:"/api/users"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx(u,{htmlFor:"request-status",children:"Status Code"}),e.jsx(B,{id:"request-status",type:"number",value:E.status_code,onChange:s=>pe({...E,status_code:parseInt(s.target.value)||200})})]})}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"request-body",children:"Response Body"}),e.jsx(ie,{id:"request-body",value:E.response_body,onChange:s=>pe({...E,response_body:s.target.value}),placeholder:"Response body...",rows:6})]})]}),e.jsxs(te,{children:[e.jsx(o,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),e.jsx(o,{onClick:ks,disabled:!E.name.trim()||!E.path.trim(),children:"Create Request"})]})]})]}),e.jsxs(z,{open:G,onOpenChange:ee,children:[e.jsx(de,{asChild:!0,children:e.jsxs(o,{size:"sm",children:[e.jsx(Re,{className:"w-4 h-4 mr-2"}),"Import"]})}),e.jsxs(H,{className:"max-w-4xl",children:[e.jsxs($,{children:[e.jsx(K,{children:"Import Data"}),e.jsx(Y,{children:"Import API data from various formats to create mock endpoints."})]}),e.jsxs(Ye,{defaultValue:"paste",className:"w-full",children:[e.jsxs(Je,{className:"grid w-full grid-cols-3",children:[e.jsx(X,{value:"paste",children:"Paste Data"}),e.jsx(X,{value:"upload",children:"Upload File"}),e.jsx(X,{value:"history",children:"History"})]}),e.jsxs(Z,{value:"paste",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"import-format",children:"Format"}),e.jsxs(ms,{value:U.format,onValueChange:s=>ue({...U,format:s}),children:[e.jsx(Ge,{children:e.jsx(xs,{})}),e.jsxs(Ue,{children:[e.jsx(_,{value:"postman",children:"Postman Collection"}),e.jsx(_,{value:"insomnia",children:"Insomnia Export"}),e.jsx(_,{value:"curl",children:"cURL Commands"}),e.jsx(_,{value:"openapi",children:"OpenAPI/Swagger"})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"import-data",children:"Data"}),e.jsx(ie,{id:"import-data",value:U.data,onChange:s=>ue({...U,data:s.target.value}),placeholder:"Paste your API data here...",rows:12})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ke,{id:"create-folders",checked:U.create_folders,onCheckedChange:s=>ue({...U,create_folders:s})}),e.jsx(u,{htmlFor:"create-folders",children:"Create folders for organization"})]})]}),e.jsx(Z,{value:"upload",className:"space-y-4",children:e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[e.jsx(Re,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Drop your file here"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Supports Postman collections, Insomnia exports, OpenAPI specs, and more"}),e.jsx(B,{type:"file",accept:".json,.yaml,.yml,.txt",onChange:s=>{var p;const n=(p=s.target.files)==null?void 0:p[0];if(n){const S=ea(n,{maxSize:10485760,allowedExtensions:["json","yaml","yml","txt"]});if(!S.valid){d.error(S.error||"Invalid file"),s.target.value="";return}const re=new FileReader;re.onload=He=>{var rs;const je=(rs=He.target)==null?void 0:rs.result;let q="postman";je.includes("swagger")||je.includes("openapi")?q="openapi":je.includes("curl")&&(q="curl"),ue({...U,data:je,format:q})},re.onerror=()=>{d.error("Failed to read file")},re.readAsText(n)}},className:"max-w-xs mx-auto"})]})}),e.jsx(Z,{value:"history",className:"space-y-4",children:e.jsx("div",{className:"space-y-2",children:Ce.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No import history available"}):Ce.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.format}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.timestamp," â€¢ ",s.routeCount," routes"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:s.success?"default":"destructive",children:s.success?"Success":"Failed"}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>Es(s),children:"Re-import"})]})]},`${s.timestamp}-${s.format}`))})})]}),e.jsxs(te,{children:[e.jsx(o,{variant:"outline",onClick:()=>ee(!1),children:"Cancel"}),e.jsx(o,{onClick:Cs,disabled:!U.data.trim(),children:"Preview Import"})]})]})]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>Ee(!0),children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Encryption"]})]})]})}),e.jsx(w,{children:e.jsxs("div",{className:"space-y-4",children:[r.folders.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Folders"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:r.folders.map(s=>e.jsx(v,{className:`cursor-pointer transition-all hover:shadow-sm ${(m==null?void 0:m.summary.id)===s.id?"ring-2 ring-primary":""}`,onClick:()=>Ns(s.id),children:e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ls,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:s.name}),e.jsxs(R,{variant:"outline",children:[s.request_count," requests"]})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.description})]})},s.id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Requests ",m&&`in ${m.summary.name}`]}),m?m.requests.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No requests in this folder"}):e.jsx("div",{className:"space-y-2",children:m.requests.map(s=>e.jsx(v,{children:e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{variant:"outline",children:s.method}),e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.path})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>Qe(s.id,s.name),children:e.jsx(cs,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"sm",children:e.jsx(We,{className:"w-4 h-4"})})]})]})})},s.id))}):r.requests.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No requests in this workspace"}):e.jsx("div",{className:"space-y-2",children:r.requests.map(s=>e.jsx(v,{children:e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{variant:"outline",children:s.method}),e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.path})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>Qe(s.id,s.name),children:e.jsx(cs,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"sm",children:e.jsx(We,{className:"w-4 h-4"})})]})]})})},s.id))})]})]})})]}),e.jsx(z,{open:i,onOpenChange:b,children:e.jsxs(H,{className:"max-w-6xl max-h-[80vh] overflow-y-auto",children:[e.jsxs($,{children:[e.jsx(K,{children:"Import Preview"}),e.jsx(Y,{children:"Review the routes that will be imported. Select which routes to include."})]}),k&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[((es=k.routes)==null?void 0:es.length)||0," routes found"]}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>{var s,n;C.size===((s=k.routes)==null?void 0:s.length)?ce(new Set):ce(new Set(((n=k.routes)==null?void 0:n.map((p,S)=>S))||[]))},children:C.size===((ss=k.routes)==null?void 0:ss.length)?"Deselect All":"Select All"})]}),e.jsxs(R,{variant:"secondary",children:[C.size," selected"]})]}),k.warnings&&k.warnings.length>0&&e.jsxs(_e,{children:[e.jsx(L,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Warnings"}),e.jsx("ul",{className:"list-disc list-inside mt-1",children:k.warnings.map(s=>e.jsx("li",{className:"text-sm",children:s},s))})]})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:(as=k.routes)==null?void 0:as.map((s,n)=>e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ke,{checked:C.has(n),onCheckedChange:p=>{const S=new Set(C);p?S.add(n):S.delete(n),ce(S)}}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{variant:"outline",children:s.method}),e.jsx("span",{className:"font-medium",children:s.name||s.path}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.path})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Status: ",s.status_code||200]}),s.headers&&Object.keys(s.headers).length>0&&e.jsxs("span",{children:[Object.keys(s.headers).length," headers"]})]})]})]})},`${s.method}-${s.path}-${n}`))})]}),e.jsxs(te,{children:[e.jsx(o,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsxs(o,{onClick:bs,disabled:C.size===0,children:["Import ",C.size," Routes"]})]})]})}),e.jsx(z,{open:ye,onOpenChange:Se,children:e.jsxs(H,{className:"max-w-4xl",children:[e.jsx($,{children:e.jsxs(K,{children:["Request History - ",A==null?void 0:A.name]})}),e.jsx(Js,{workspaceId:(r==null?void 0:r.summary.id)||"",requestId:(A==null?void 0:A.id)||"",requestName:(A==null?void 0:A.name)||""})]})}),e.jsx(z,{open:Ie,onOpenChange:Ee,children:e.jsxs(H,{children:[e.jsxs($,{children:[e.jsx(K,{children:"Encryption Settings"}),e.jsx(Y,{children:"Configure encryption settings for this workspace."})]}),e.jsx(Xs,{workspaceId:(r==null?void 0:r.summary.id)||"",workspaceName:(r==null?void 0:r.summary.name)||""})]})}),e.jsx(z,{open:Fe,onOpenChange:oe,children:e.jsxs(H,{children:[e.jsxs($,{children:[e.jsx(K,{children:"Delete Workspace"}),e.jsx(Y,{children:"Are you sure you want to delete this workspace? This action cannot be undone."})]}),e.jsxs(te,{children:[e.jsx(o,{variant:"outline",onClick:()=>oe(!1),children:"Cancel"}),e.jsx(o,{variant:"destructive",onClick:gs,children:"Delete Workspace"})]})]})})]})};export{ua as default};
